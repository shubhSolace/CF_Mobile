!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("ngx-carousel-lib",["exports","@angular/core"],e):e(t["ngx-carousel-lib"]={},t.ng.core)}(this,function(t,n){"use strict";var e=function(){function t(){this._currdeg=0,this._totalItems=0,this._maxWidthSize=0,this._maxHeightSize=0,this._maxDegree=0,this._totalWidth=0,this._isHorizontal=!1,this._items=[],this._degreesSlides=[],this._activeIndex=0,this._lastIndex=-1,this._lockSlides=!1,this._autoPlayIsRunning=!1}return Object.defineProperty(t.prototype,"autoPlayIsRunning",{get:function(){return this._autoPlayIsRunning},set:function(t){this._autoPlayIsRunning=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currdeg",{get:function(){return this._currdeg},set:function(t){this._currdeg=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalItems",{get:function(){return this._totalItems},set:function(t){this._totalItems=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHorizontal",{get:function(){return this._isHorizontal},set:function(t){this._isHorizontal=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxWidthSize",{get:function(){return this._maxWidthSize},set:function(t){this._maxWidthSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxHeightSize",{get:function(){return this._maxHeightSize},set:function(t){this._maxHeightSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxDegree",{get:function(){return this._maxDegree},set:function(t){this._maxDegree=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalWidth",{get:function(){return this._totalWidth},set:function(t){this._totalWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"degreesSlides",{get:function(){return this._degreesSlides},set:function(t){this._degreesSlides=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeIndex",{get:function(){return this._activeIndex},set:function(t){this._activeIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lockSlides",{get:function(){return this._lockSlides},set:function(t){this._lockSlides=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastIndex",{get:function(){return this._lastIndex},set:function(t){this._lastIndex=t},enumerable:!0,configurable:!0}),t}(),i=1e-12,s="left",o="right",r="up",a="down",l="none",u=function(){function t(t,e){this.el=t,this.renderer=e,this.isDown=!1,this.initialPosX=i,this.initialPosY=i,this.lastPosX=i,this.lastPosY=i,this.swipeDistanceX=i,this.swipeDistanceY=i,this.firstSwipeDate=Date.now(),this.direction=l,this.onSwipeRight=new n.EventEmitter,this.onSwipeLeft=new n.EventEmitter,this.onSwipeUp=new n.EventEmitter,this.onSwipeDown=new n.EventEmitter,this.onSwipe=new n.EventEmitter,this.onSwipeStart=new n.EventEmitter,this.onSwipeEnd=new n.EventEmitter,this.swipeLeft=new n.EventEmitter,this.swipeRight=new n.EventEmitter}return t.prototype.ngOnInit=function(){},t.prototype.getResultFromEvent=function(t){var e=t.clientX-this.initialPosX-this.lastPosX;e=e<30?e:30,this.swipeDistanceX+=e;var i=t.clientY-this.initialPosY-this.lastPosY;return i=i<30?i:30,this.swipeDistanceY+=i,this.lastPosX=t.clientX-this.initialPosX,this.lastPosY=t.clientY-this.initialPosY,{velocityX:e,velocityY:i,isFinal:!1,direction:this.direction,event:t}},t.prototype.swipeStart=function(t){this.firstSwipeDate=Date.now(),this.isDown=!0,this.initialPosX=t.clientX,this.initialPosY=t.clientY,this.swipeDistanceX=i,this.swipeDistanceY=i,this.onSwipeStart.emit()},t.prototype.swipeEnd=function(t){this.initialPosX=this.lastPosX=i,this.initialPosY=this.lastPosY=i,this.isDown=!1;var e={velocityX:0,velocityY:0,isFinal:!this.isDown};this.onSwipeEnd.emit(e),this.swipeDistanceX=i,this.swipeDistanceY=i},t.prototype.swipeMove=function(t){var e=this.getResultFromEvent(t);0<e.velocityX?(this.direction=s,this.onSwipeLeft.emit(e)):e.velocityX<0?(this.direction=o,this.onSwipeRight.emit(e)):0<e.velocityY?(this.direction=a,this.onSwipeDown.emit(e)):e.velocityY<0&&(this.direction=r,this.onSwipeUp.emit(e)),this.onSwipe.emit(e)},t.prototype.onTouchStart=function(t){var e=t.touches[0]||t.changedTouches[0];this.swipeStart(e)},t.prototype.onMouseDown=function(t){this.swipeStart(t)},t.prototype.onMouseUp=function(t){this.swipeEnd(t)},t.prototype.onTouchEnd=function(t){var e=t.touches[0]||t.changedTouches[0];this.swipeEnd(e)},t.prototype.onMouseMove=function(t){this.isDown&&this.swipeMove(t)},t.prototype.onTouchMove=function(t){var e=t.touches[0]||t.changedTouches[0];this.swipeMove(e)},t.decorators=[{type:n.Directive,args:[{selector:"[swiper]",exportAs:"swiper"}]}],t.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2}]},t.propDecorators={onSwipeRight:[{type:n.Output}],onSwipeLeft:[{type:n.Output}],onSwipeUp:[{type:n.Output}],onSwipeDown:[{type:n.Output}],onSwipe:[{type:n.Output}],onSwipeStart:[{type:n.Output}],onSwipeEnd:[{type:n.Output}],swipeLeft:[{type:n.Output}],swipeRight:[{type:n.Output}],onTouchStart:[{type:n.HostListener,args:["touchstart",["$event"]]}],onMouseDown:[{type:n.HostListener,args:["mousedown",["$event"]]}],onMouseUp:[{type:n.HostListener,args:["document:mouseup",["$event"]]}],onTouchEnd:[{type:n.HostListener,args:["touchend",["$event"]]}],onMouseMove:[{type:n.HostListener,args:["mousemove",["$event"]]}],onTouchMove:[{type:n.HostListener,args:["touchmove",["$event"]]}]},t}(),c=function(){function t(t){this.componentElement=t,this.itemsCarouselRendered=0,this.morePairSlides=1,this.threshold=5,this.angle=45,this.ratioScale=1,this.margin=20,this.perspective=2e3,this.endInSlide=!0,this.timeToSlide=300,this.lockSlides=!1,this.initialSlide=0,this.loop=!1,this.mode="horizontal",this.autoPlay=!1,this.delayAutoPlay=3e3,this.onInit=new n.EventEmitter,this.onReady=new n.EventEmitter,this.onChangeProperties=new n.EventEmitter,this.onSlideChange=new n.EventEmitter,this.onSlideCentered=new n.EventEmitter,this.onTransitionStart=new n.EventEmitter,this.onTransitionEnd=new n.EventEmitter,this.onSlideNextTransitionStart=new n.EventEmitter,this.onSlideNextTransitionEnd=new n.EventEmitter,this.onSlidePrevTransitionStart=new n.EventEmitter,this.onSlidePrevTransitionEnd=new n.EventEmitter,this.onSlideMove=new n.EventEmitter,this.onSlideMoveEnd=new n.EventEmitter,this.onSlideMoveStart=new n.EventEmitter,this.onTouchMove=new n.EventEmitter,this.onTouchStart=new n.EventEmitter,this.onTouchEnd=new n.EventEmitter,this.onReachBeginning=new n.EventEmitter,this.onReachEnd=new n.EventEmitter,this.carousel=new e}return t.prototype.onDomChange=function(t){0<t.addedNodes.length&&(0===this.itemsCarouselRendered?this.reInit():(this.update(),this.updateCssShowSlides()),this.itemsCarouselRendered=this.carouselElm.nativeElement.getElementsByClassName("item-carousel").length)},t.prototype.ngOnInit=function(){this.onInit.emit(this.carousel),this.itemsCarouselRendered=this.carouselElm.nativeElement.getElementsByClassName("item-carousel").length},t.prototype.ngOnChanges=function(e){var i=this;Object.keys(e).map(function(t){e[t].currentValue===e[t].previousValue||e[t].isFirstChange()||(i.update(),i.onChangeProperties.emit(e))})},t.prototype.ngAfterViewInit=function(){this.initEventsPan(),this.configPlugin(),setTimeout(function(){this.componentElement.nativeElement.className+=" ready"}.bind(this)),this.onReady.emit(this.carousel)},t.prototype.lockCarousel=function(t){this.carousel.lockSlides=t},t.prototype.slideNext=function(){if(this.checkLimitsCarrousel(this.carousel.activeIndex+1)){this.moveSlideTo(this.carousel.activeIndex+1);var t=this;setTimeout(function(){return t.detectCurrentSlide()})}},t.prototype.slidePrev=function(){if(this.checkLimitsCarrousel(this.carousel.activeIndex-1)){this.moveSlideTo(this.carousel.activeIndex-1);var t=this;setTimeout(function(){return t.detectCurrentSlide()})}},t.prototype.slideTo=function(t){if(this.checkLimitsCarrousel(t)){this.moveSlideTo(t);var e=this;setTimeout(function(){return e.detectCurrentSlide()})}},t.prototype.autoPlayStart=function(){this.autoPlay=!0,this.autoPlaySlide()},t.prototype.autoPlayStop=function(){clearInterval(this.autoPlayTimeout),this.carousel.autoPlayIsRunning=!1},t.prototype.toggleMode=function(){this.mode="vertical"===this.mode?"horizontal":"vertical",this.update()},t.prototype.reInit=function(){this.carousel=new e,this.configPlugin()},t.prototype.update=function(){this.setPerspectiveContainer(),this.checkRotation(),this.carousel.items=Array.from(this.carouselElm.nativeElement.getElementsByClassName("item-carousel")),this.carousel.totalItems=this.carousel.items.length,this.getmaxSizes(),this.carousel.lockSlides=this.lockSlides,this.setDegreesOnSlides(),this.setTransformCarrousel(-this.carousel.degreesSlides[this.carousel.activeIndex])},t.prototype.configPlugin=function(){this.update(),this.manageEvents(),this.initSlidesOn(),this.updateCssShowSlides(),this.autoPlaySlide()},t.prototype.initEventsPan=function(){var e=this;this.swiper.onSwipe.subscribe(function(t){e.rotate(t)}),this.swiper.onSwipeEnd.subscribe(function(t){e.rotate(t)})},t.prototype.rotate=function(t){if(!this.carousel.lockSlides){var e=this.carousel.isHorizontal?t.velocityX/this.threshold:-t.velocityY/this.threshold;this.setNewDeg(this.carousel.currdeg+e*window.devicePixelRatio),this.moveCarrousel(this.carousel.currdeg),t.isFinal&&this.endInSlide&&this.moveSlideTo(this.carousel.activeIndex)}},t.prototype.autoPlaySlide=function(){this.autoPlay&&(this.autoPlayTimeout=setTimeout(function(){this.carousel.autoPlayIsRunning=!0,this.slideNext(),this.autoPlaySlide()}.bind(this),this.delayAutoPlay))},t.prototype.initSlidesOn=function(){0<=this.initialSlide&&this.initialSlide<this.carousel.items.length?this.carousel.activeIndex=parseInt(this.initialSlide.toString()):(this.initialSlide>=this.carousel.items.length?this.carousel.activeIndex=this.carousel.items.length-1:this.carousel.activeIndex=0,this.initialSlide=this.carousel.activeIndex);var t=this.carousel.activeIndex*this.angle;this.setNewDeg(-t),this.setTransformCarrousel(-t)},t.prototype.setNewDeg=function(t){this.carousel.currdeg=t,0<this.carousel.currdeg&&(this.carousel.currdeg=0),this.carousel.currdeg<-this.carousel.maxDegree&&(this.carousel.currdeg=-this.carousel.maxDegree)},t.prototype.checkRotation=function(){this.carousel.isHorizontal="vertical"!==this.mode,this.rotationFn=this.carousel.isHorizontal?"rotateY":"rotateX"},t.prototype.checkLimitsCarrousel=function(t){return this.carousel.activeIndex!==t&&0<=t&&t<this.carousel.totalItems},t.prototype.moveSlideTo=function(t){this.setNewDeg(-this.carousel.degreesSlides[t]),this.moveCarrousel(this.carousel.currdeg,this.timeToSlide)},t.prototype.moveCarrousel=function(t,e){void 0===e&&(e=0);var i="transform "+e+"ms";this.carouselElm.nativeElement.style.transition=i,this.carouselElm.nativeElement.style.webkitTransition=i,this.setTransformCarrousel(t),this.detectCurrentSlide()},t.prototype.setTransformCarrousel=function(t){var e="translateZ("+-this.radius+"px) "+this.rotationFn+"("+t+"deg)";this.carouselElm.nativeElement.style.transform=e,this.carouselElm.nativeElement.style.webkitTransform=e,this.sendSlideIsCentered()},t.prototype.sendSlideIsCentered=function(){this.carousel.currdeg===-this.carousel.degreesSlides[this.carousel.activeIndex]&&this.onSlideCentered.emit(this.carousel)},t.prototype.setPerspectiveContainer=function(){this.containerElm.nativeElement.style.perspective=this.perspective,this.containerElm.nativeElement.style.webkitPerspective=this.perspective,this.containerElm.nativeElement.style.MozPerspective=this.perspective},t.prototype.getmaxSizes=function(){var n=this;this.carousel.items.map(function(t){var e=t.offsetWidth,i=t.offsetHeight;n.carousel.maxWidthSize=0,n.carousel.maxHeightSize=0,e>n.carousel.maxWidthSize&&(n.carousel.maxWidthSize=e,n.carousel.totalWidth=n.carousel.items.length*n.carousel.maxWidthSize),i>n.carousel.maxHeightSize&&(n.carousel.maxHeightSize=i,n.carousel.totalWidth=n.carousel.items.length*n.carousel.maxHeightSize)}),this.setContainerWithMaxSize()},t.prototype.setContainerWithMaxSize=function(){this.containerElm.nativeElement.style.width=this.carousel.maxWidthSize+"px",this.containerElm.nativeElement.style.height=this.carousel.maxHeightSize+"px"},t.prototype.setDegreesOnSlides=function(){var n=this,s=0,t=this.carousel.isHorizontal?this.carousel.maxWidthSize:this.carousel.maxHeightSize;this.radius=Math.round(t/2/Math.tan(Math.PI/(360/this.angle)))+this.margin,this.carousel.degreesSlides=[],this.carousel.items.map(function(t,e){var i=n.rotationFn+"("+s+"deg) translateZ("+n.radius+"px)";t.style.transform=i,t.style.webkitTransform=i,n.carousel.degreesSlides.push(s),n.carousel.maxDegree=s,s+=n.angle})},t.prototype.detectCurrentSlide=function(){var n=this,s=99e9,o=0;this.carousel.degreesSlides.forEach(function(t,e){var i=Math.abs(t-Math.abs(n.carousel.currdeg));i<s&&(s=i,o=e)}),this.carousel.activeIndex!==o&&(this.carousel.lastIndex=this.carousel.activeIndex,this.carousel.activeIndex=o,this.updateCssShowSlides(),this.onSlideChange.emit(this.carousel),0===this.carousel.activeIndex?this.onReachBeginning.emit(this.carousel):this.carousel.activeIndex===this.carousel.totalItems-1&&this.onReachEnd.emit(this.carousel))},t.prototype.updateCssShowSlides=function(){var t=this,e=t.carousel.activeIndex,i=this.carousel.items[e];t.removeClassShowSlides("actual"),t.removeClassShowSlides("prev"),t.removeClassShowSlides("next"),i&&(i.className+=" actual");for(var n=0;n<this.morePairSlides;n++){var s=t.carousel.items[e-(n+1)],o=t.carousel.items[e+(n+1)];s&&(s.className+=" prev"),o&&(o.className+=" next")}},t.prototype.removeClassShowSlides=function(e){0<this.carouselElm.nativeElement.getElementsByClassName(e).length&&Array.from(this.carouselElm.nativeElement.getElementsByClassName(e)).map(function(t){t.classList.remove(e)})},t.prototype.manageEvents=function(){var i=this,n=this;this.swiper.onSwipe.subscribe(function(t){n.onSlideMove.emit({carousel:n.carousel,event:t}),n.onTouchMove.emit({carousel:n.carousel,event:t})}),this.swiper.onSwipeStart.subscribe(function(t){n.onSlideMoveStart.emit({carousel:n.carousel,event:t}),n.onTouchStart.emit({carousel:n.carousel,event:t})}),this.swiper.onSwipeEnd.subscribe(function(t){n.onSlideMoveEnd.emit({carousel:n.carousel,event:t}),n.onTouchEnd.emit({carousel:n.carousel,event:t})}),this.carouselElm.nativeElement.addEventListener("transitionend",function(t){var e={carousel:n.carousel,event:t};"transform"===t.propertyName&&(i.onTransitionEnd.emit(e),n.carousel.lastIndex>n.carousel.activeIndex?i.onSlideNextTransitionEnd.emit(e):i.onSlidePrevTransitionEnd.emit(e))}),this.carouselElm.nativeElement.addEventListener("transitionstart",function(t){var e={carousel:n.carousel,event:t};"transform"===t.propertyName&&i.onTransitionStart.emit(e)}),window.addEventListener("resize",function(){this.update()}.bind(this))},t.decorators=[{type:n.Component,args:[{selector:"carousel-component",template:'<div class="container" #container>\n  <div class="carousel" #carousel swiper (domChange)="onDomChange($event)">\n    <ng-content select=".item-carousel"></ng-content>\n  </div>\n</div>',styles:["\n   :host{\n        display: flex;\n    }\n   :host .container {\n        margin: 0 auto;\n        width: 600px;\n        height: 400px;\n        position: relative;\n    }\n   :host .container .carousel {\n        height: 100%;\n        width: 100%;\n        position: absolute;\n        -webkit-transform-style: preserve-3d;\n        -moz-transform-style: preserve-3d;\n        -o-transform-style: preserve-3d;\n        transform-style: preserve-3d;\n\n    }\n   :host.ready .carousel {\n        -webkit-transition: -webkit-transform 300ms;\n        -moz-transition:-moz-transform 300ms;\n        -o-transition: -o-transform 300ms;\n        transition: transform 300ms;\n    }\n   :host .container .carousel::content >>> .item-carousel {\n        display: block;\n        position: absolute;\n        border:1px solid black;\n        width: 100%;\n        height: 100%;\n        text-align: center;\n        transform-style: preserve-3d;\n        opacity: 0;\n    }\n   :host.ready .carousel::content >>> .item-carousel {\n        -webkit-transition: opacity 300ms, -webkit-transform 300ms;\n        -moz-transition: opacity 300ms, -moz-transform 300ms;\n        -o-transition: opacity 300ms, -o-transform 300ms;\n        transition: opacity 300ms, transform 300ms;\n    }\n\n   :host .container .carousel::content >>> .item-carousel img{\n        user-drag: none;\n        user-select: none;\n        -moz-user-select: none;\n        -webkit-user-drag: none;\n        -webkit-user-select: none;\n        -ms-user-select: none;\n    }\n\n   :host .container .carousel::content >>> .item-carousel.next,\n   :host .container .carousel::content >>> .item-carousel.prev,\n   :host .container .carousel::content >>> .item-carousel.actual{\n        opacity: 0.95;\n    }\n  "]}]}],t.ctorParameters=function(){return[{type:n.ElementRef}]},t.propDecorators={swiper:[{type:n.ViewChild,args:[u]}],morePairSlides:[{type:n.Input}],threshold:[{type:n.Input}],angle:[{type:n.Input}],ratioScale:[{type:n.Input}],margin:[{type:n.Input}],perspective:[{type:n.Input}],endInSlide:[{type:n.Input}],timeToSlide:[{type:n.Input}],lockSlides:[{type:n.Input}],initialSlide:[{type:n.Input}],loop:[{type:n.Input}],mode:[{type:n.Input}],autoPlay:[{type:n.Input}],delayAutoPlay:[{type:n.Input}],onInit:[{type:n.Output}],onReady:[{type:n.Output}],onChangeProperties:[{type:n.Output}],onSlideChange:[{type:n.Output}],onSlideCentered:[{type:n.Output}],onTransitionStart:[{type:n.Output}],onTransitionEnd:[{type:n.Output}],onSlideNextTransitionStart:[{type:n.Output}],onSlideNextTransitionEnd:[{type:n.Output}],onSlidePrevTransitionStart:[{type:n.Output}],onSlidePrevTransitionEnd:[{type:n.Output}],onSlideMove:[{type:n.Output}],onSlideMoveEnd:[{type:n.Output}],onSlideMoveStart:[{type:n.Output}],onTouchMove:[{type:n.Output}],onTouchStart:[{type:n.Output}],onTouchEnd:[{type:n.Output}],onReachBeginning:[{type:n.Output}],onReachEnd:[{type:n.Output}],carouselElm:[{type:n.ViewChild,args:["carousel"]}],containerElm:[{type:n.ViewChild,args:["container"]}]},t}();function h(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,s,o=i.call(t),r=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)r.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(i=o["return"])&&i.call(o)}finally{if(s)throw s.error}}return r}function p(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t}var d=function(){function t(t){var e=this;this.elementRef=t,this.domChange=new n.EventEmitter;var i=this.elementRef.nativeElement;this.changes=new MutationObserver(function(t){t.forEach(function(t){return e.domChange.emit(t)})}),this.changes.observe(i,{attributes:!0,childList:!0,characterData:!0})}return t.prototype.ngOnDestroy=function(){this.changes.disconnect()},t.decorators=[{type:n.Directive,args:[{selector:"[domChange]"}]}],t.ctorParameters=function(){return[{type:n.ElementRef}]},t.propDecorators={domChange:[{type:n.Output}]},t}(),m=[c],v=[u,d],y=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{declarations:p(m,v),imports:[],exports:p(m,v)}]}],t}();t.CarouselComponent=c,t.CarouselModule=y,t.ɵb=d,t.ɵa=u,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-carousel-lib.umd.min.js.map