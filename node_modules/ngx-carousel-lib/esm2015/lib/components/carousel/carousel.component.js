/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ElementRef, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import Carousel from '../../model/Carousel';
import { SwiperDirective } from '../../directives/swiper.directive';
export class CarouselComponent {
    /**
     * @param {?} componentElement
     */
    constructor(componentElement) {
        this.componentElement = componentElement;
        this.itemsCarouselRendered = 0;
        this.morePairSlides = 1;
        this.threshold = 5;
        this.angle = 45;
        this.ratioScale = 1;
        this.margin = 20;
        this.perspective = 2000;
        this.endInSlide = true;
        this.timeToSlide = 300;
        this.lockSlides = false;
        this.initialSlide = 0;
        this.loop = false;
        this.mode = 'horizontal';
        // autoPlay
        this.autoPlay = false;
        this.delayAutoPlay = 3000;
        this.onInit = new EventEmitter();
        this.onReady = new EventEmitter();
        this.onChangeProperties = new EventEmitter();
        this.onSlideChange = new EventEmitter();
        this.onSlideCentered = new EventEmitter();
        this.onTransitionStart = new EventEmitter();
        this.onTransitionEnd = new EventEmitter();
        this.onSlideNextTransitionStart = new EventEmitter();
        this.onSlideNextTransitionEnd = new EventEmitter();
        this.onSlidePrevTransitionStart = new EventEmitter();
        this.onSlidePrevTransitionEnd = new EventEmitter();
        this.onSlideMove = new EventEmitter();
        this.onSlideMoveEnd = new EventEmitter();
        this.onSlideMoveStart = new EventEmitter();
        this.onTouchMove = new EventEmitter();
        this.onTouchStart = new EventEmitter();
        this.onTouchEnd = new EventEmitter();
        this.onReachBeginning = new EventEmitter();
        this.onReachEnd = new EventEmitter();
        this.carousel = new Carousel();
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onDomChange($event) {
        if ($event.addedNodes.length > 0) {
            if (this.itemsCarouselRendered === 0) {
                this.reInit();
            }
            else {
                this.update();
                this.updateCssShowSlides();
            }
            this.itemsCarouselRendered = this.carouselElm.nativeElement.getElementsByClassName('item-carousel').length;
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.onInit.emit(this.carousel);
        this.itemsCarouselRendered = this.carouselElm.nativeElement.getElementsByClassName('item-carousel').length;
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        Object.keys(changes).map((/**
         * @param {?} val
         * @return {?}
         */
        val => {
            if (changes[val].currentValue !== changes[val].previousValue && !changes[val].isFirstChange()) {
                this.update();
                this.onChangeProperties.emit(changes);
            }
        }));
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        this.initEventsPan();
        this.configPlugin();
        setTimeout((/**
         * @return {?}
         */
        function () {
            this.componentElement.nativeElement.className += ' ready';
        }).bind(this));
        this.onReady.emit(this.carousel);
    }
    /**
     * @param {?} val
     * @return {?}
     */
    lockCarousel(val) {
        this.carousel.lockSlides = val;
    }
    /**
     * @return {?}
     */
    slideNext() {
        if (this.checkLimitsCarrousel(this.carousel.activeIndex + 1)) {
            this.moveSlideTo(this.carousel.activeIndex + 1);
            /** @type {?} */
            const vm = this;
            setTimeout((/**
             * @return {?}
             */
            () => vm.detectCurrentSlide()));
        }
    }
    /**
     * @return {?}
     */
    slidePrev() {
        if (this.checkLimitsCarrousel(this.carousel.activeIndex - 1)) {
            this.moveSlideTo(this.carousel.activeIndex - 1);
            /** @type {?} */
            const vm = this;
            setTimeout((/**
             * @return {?}
             */
            () => vm.detectCurrentSlide()));
        }
    }
    /**
     * @param {?} index
     * @return {?}
     */
    slideTo(index) {
        if (this.checkLimitsCarrousel(index)) {
            this.moveSlideTo(index);
            /** @type {?} */
            const vm = this;
            setTimeout((/**
             * @return {?}
             */
            () => vm.detectCurrentSlide()));
        }
    }
    /**
     * @return {?}
     */
    autoPlayStart() {
        this.autoPlay = true;
        this.autoPlaySlide();
    }
    /**
     * @return {?}
     */
    autoPlayStop() {
        clearInterval(this.autoPlayTimeout);
        this.carousel.autoPlayIsRunning = false;
    }
    /**
     * @return {?}
     */
    toggleMode() {
        this.mode = this.mode === 'vertical' ? 'horizontal' : 'vertical';
        this.update();
    }
    /**
     * @return {?}
     */
    reInit() {
        this.carousel = new Carousel;
        this.configPlugin();
    }
    /**
     * @return {?}
     */
    update() {
        this.setPerspectiveContainer();
        this.checkRotation();
        this.carousel.items = Array.from(this.carouselElm.nativeElement.getElementsByClassName('item-carousel'));
        this.carousel.totalItems = this.carousel.items.length;
        this.getmaxSizes();
        this.carousel.lockSlides = this.lockSlides;
        this.setDegreesOnSlides();
        this.setTransformCarrousel(-this.carousel.degreesSlides[this.carousel.activeIndex]);
    }
    /**
     * @private
     * @return {?}
     */
    configPlugin() {
        this.update();
        this.manageEvents();
        this.initSlidesOn();
        this.updateCssShowSlides();
        this.autoPlaySlide();
    }
    /**
     * @private
     * @return {?}
     */
    initEventsPan() {
        this.swiper.onSwipe.subscribe((/**
         * @param {?} distance
         * @return {?}
         */
        (distance) => {
            this.rotate(distance);
        }));
        this.swiper.onSwipeEnd.subscribe((/**
         * @param {?} distance
         * @return {?}
         */
        (distance) => {
            this.rotate(distance);
        }));
    }
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    rotate(e) {
        if (!this.carousel.lockSlides) {
            /** @type {?} */
            const velocity = this.carousel.isHorizontal ? e.velocityX / this.threshold : -e.velocityY / this.threshold;
            this.setNewDeg(this.carousel.currdeg + velocity * window.devicePixelRatio);
            this.moveCarrousel(this.carousel.currdeg);
            if (e.isFinal && this.endInSlide) {
                this.moveSlideTo(this.carousel.activeIndex);
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    autoPlaySlide() {
        if (this.autoPlay) {
            this.autoPlayTimeout = setTimeout((/**
             * @return {?}
             */
            function () {
                this.carousel.autoPlayIsRunning = true;
                this.slideNext();
                this.autoPlaySlide();
            }).bind(this), this.delayAutoPlay);
        }
    }
    /**
     * @private
     * @return {?}
     */
    initSlidesOn() {
        if (this.initialSlide >= 0 && this.initialSlide < this.carousel.items.length) {
            this.carousel.activeIndex = parseInt(this.initialSlide.toString());
        }
        else if (this.initialSlide >= this.carousel.items.length) {
            this.carousel.activeIndex = this.carousel.items.length - 1;
            this.initialSlide = this.carousel.activeIndex;
        }
        else {
            this.carousel.activeIndex = 0;
            this.initialSlide = this.carousel.activeIndex;
        }
        /** @type {?} */
        const newDeg = this.carousel.activeIndex * this.angle;
        this.setNewDeg(-newDeg);
        this.setTransformCarrousel(-newDeg);
    }
    /**
     * @private
     * @param {?} newDeg
     * @return {?}
     */
    setNewDeg(newDeg) {
        this.carousel.currdeg = newDeg;
        if (this.carousel.currdeg > 0) {
            this.carousel.currdeg = 0;
        }
        if (this.carousel.currdeg < -this.carousel.maxDegree) {
            this.carousel.currdeg = -this.carousel.maxDegree;
        }
    }
    /**
     * @private
     * @return {?}
     */
    checkRotation() {
        this.carousel.isHorizontal = this.mode !== 'vertical';
        this.rotationFn = this.carousel.isHorizontal ? 'rotateY'
            : 'rotateX';
    }
    /**
     * @private
     * @param {?} index
     * @return {?}
     */
    checkLimitsCarrousel(index) {
        return this.carousel.activeIndex !== index && index >= 0 && index < this.carousel.totalItems;
    }
    /**
     * @private
     * @param {?} index
     * @return {?}
     */
    moveSlideTo(index) {
        this.setNewDeg(-this.carousel.degreesSlides[index]);
        this.moveCarrousel(this.carousel.currdeg, this.timeToSlide);
    }
    /**
     * @private
     * @param {?} deg
     * @param {?=} timeTransform
     * @return {?}
     */
    moveCarrousel(deg, timeTransform = 0) {
        /** @type {?} */
        const transition = `transform ${timeTransform}ms`;
        this.carouselElm.nativeElement.style.transition = transition;
        this.carouselElm.nativeElement.style.webkitTransition = transition;
        this.setTransformCarrousel(deg);
        this.detectCurrentSlide();
    }
    /**
     * @private
     * @param {?} deg
     * @return {?}
     */
    setTransformCarrousel(deg) {
        /** @type {?} */
        const transform = `translateZ(${-this.radius}px) ${this.rotationFn}(${deg}deg)`;
        this.carouselElm.nativeElement.style.transform = transform;
        this.carouselElm.nativeElement.style.webkitTransform = transform;
        this.sendSlideIsCentered();
    }
    /**
     * @private
     * @return {?}
     */
    sendSlideIsCentered() {
        if (this.carousel.currdeg === -this.carousel.degreesSlides[this.carousel.activeIndex]) {
            this.onSlideCentered.emit(this.carousel);
        }
    }
    /**
     * @private
     * @return {?}
     */
    setPerspectiveContainer() {
        this.containerElm.nativeElement.style.perspective = this.perspective;
        this.containerElm.nativeElement.style.webkitPerspective = this.perspective;
        this.containerElm.nativeElement.style.MozPerspective = this.perspective;
    }
    /**
     * @private
     * @return {?}
     */
    getmaxSizes() {
        this.carousel.items.map((/**
         * @param {?} val
         * @return {?}
         */
        (val) => {
            /** @type {?} */
            const width = val.offsetWidth;
            /** @type {?} */
            const height = val.offsetHeight;
            this.carousel.maxWidthSize = 0;
            this.carousel.maxHeightSize = 0;
            if (width > this.carousel.maxWidthSize) {
                this.carousel.maxWidthSize = width;
                this.carousel.totalWidth = this.carousel.items.length * this.carousel.maxWidthSize;
            }
            if (height > this.carousel.maxHeightSize) {
                this.carousel.maxHeightSize = height;
                this.carousel.totalWidth = this.carousel.items.length * this.carousel.maxHeightSize;
            }
        }));
        this.setContainerWithMaxSize();
    }
    /**
     * @private
     * @return {?}
     */
    setContainerWithMaxSize() {
        this.containerElm.nativeElement.style.width = this.carousel.maxWidthSize + 'px';
        this.containerElm.nativeElement.style.height = this.carousel.maxHeightSize + 'px';
    }
    /**
     * @private
     * @return {?}
     */
    setDegreesOnSlides() {
        /** @type {?} */
        let auxDegree = 0;
        /** @type {?} */
        const panelSize = this.carousel.isHorizontal ? this.carousel.maxWidthSize : this.carousel.maxHeightSize;
        this.radius = (Math.round((panelSize / 2) /
            Math.tan(Math.PI / (360 / this.angle))) + this.margin);
        this.carousel.degreesSlides = [];
        this.carousel.items.map((/**
         * @param {?} val
         * @param {?} index
         * @return {?}
         */
        (val, index) => {
            /** @type {?} */
            const transform = `${this.rotationFn}(${auxDegree}deg) translateZ(${this.radius}px)`;
            val.style.transform = transform;
            val.style.webkitTransform = transform;
            this.carousel.degreesSlides.push(auxDegree);
            this.carousel.maxDegree = auxDegree;
            auxDegree += this.angle;
        }));
    }
    /**
     * @private
     * @return {?}
     */
    detectCurrentSlide() {
        /** @type {?} */
        let aux = 99e9;
        /** @type {?} */
        let index = 0;
        this.carousel.degreesSlides.forEach((/**
         * @param {?} val
         * @param {?} i
         * @return {?}
         */
        (val, i) => {
            /** @type {?} */
            const res = Math.abs(val - Math.abs(this.carousel.currdeg));
            if (res < aux) {
                aux = res;
                index = i;
            }
        }));
        if (this.carousel.activeIndex !== index) {
            this.carousel.lastIndex = this.carousel.activeIndex;
            this.carousel.activeIndex = index;
            this.updateCssShowSlides();
            this.onSlideChange.emit(this.carousel);
            if (this.carousel.activeIndex === 0) {
                this.onReachBeginning.emit(this.carousel);
            }
            else if (this.carousel.activeIndex === this.carousel.totalItems - 1) {
                this.onReachEnd.emit(this.carousel);
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    updateCssShowSlides() {
        /** @type {?} */
        const vm = this;
        /** @type {?} */
        const currentIndex = vm.carousel.activeIndex;
        /** @type {?} */
        const actual = this.carousel.items[currentIndex];
        vm.removeClassShowSlides('actual');
        vm.removeClassShowSlides('prev');
        vm.removeClassShowSlides('next');
        if (actual) {
            actual.className += ' actual';
        }
        for (let x = 0; x < this.morePairSlides; x++) {
            /** @type {?} */
            const prev = vm.carousel.items[currentIndex - (x + 1)];
            /** @type {?} */
            const next = vm.carousel.items[currentIndex + (x + 1)];
            if (prev) {
                prev.className += ' prev';
            }
            if (next) {
                next.className += ' next';
            }
        }
    }
    /**
     * @private
     * @param {?} tagClass
     * @return {?}
     */
    removeClassShowSlides(tagClass) {
        if (this.carouselElm.nativeElement.getElementsByClassName(tagClass).length > 0) {
            Array.from(this.carouselElm.nativeElement.getElementsByClassName(tagClass)).map((/**
             * @param {?} val
             * @return {?}
             */
            (val) => {
                val['classList'].remove(tagClass);
            }));
        }
    }
    /**
     * @private
     * @return {?}
     */
    manageEvents() {
        /** @type {?} */
        const options = {
            preventDefault: true
        };
        /** @type {?} */
        const vm = this;
        this.swiper.onSwipe.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            vm.onSlideMove.emit({ carousel: vm.carousel, event: e });
            vm.onTouchMove.emit({ carousel: vm.carousel, event: e });
        }));
        this.swiper.onSwipeStart.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            vm.onSlideMoveStart.emit({ carousel: vm.carousel, event: e });
            vm.onTouchStart.emit({ carousel: vm.carousel, event: e });
        }));
        this.swiper.onSwipeEnd.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            vm.onSlideMoveEnd.emit({ carousel: vm.carousel, event: e });
            vm.onTouchEnd.emit({ carousel: vm.carousel, event: e });
        }));
        this.carouselElm.nativeElement.addEventListener('transitionend', (/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            /** @type {?} */
            const elm = { carousel: vm.carousel, event: e };
            if (e.propertyName === 'transform') {
                this.onTransitionEnd.emit(elm);
                if (vm.carousel.lastIndex > vm.carousel.activeIndex) {
                    this.onSlideNextTransitionEnd.emit(elm);
                }
                else {
                    this.onSlidePrevTransitionEnd.emit(elm);
                }
            }
        }));
        this.carouselElm.nativeElement.addEventListener('transitionstart', (/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            /** @type {?} */
            const elm = { carousel: vm.carousel, event: e };
            if (e.propertyName === 'transform') {
                this.onTransitionStart.emit(elm);
                // if (e.direction === Hammer.DIRECTION_LEFT) {
                //   vm.onSlideNextTransitionStart.emit(elm);
                // } else if (e.direction === Hammer.DIRECTION_RIGHT) {
                //   vm.onSlidePrevTransitionStart.emit(elm);
                // }
            }
        }));
        window.addEventListener('resize', (/**
         * @return {?}
         */
        function () {
            this.update();
        }).bind(this));
    }
}
CarouselComponent.decorators = [
    { type: Component, args: [{
                selector: 'carousel-component',
                template: '<div class="container" #container>\n' +
                    '  <div class="carousel" #carousel swiper (domChange)="onDomChange($event)">\n' +
                    '    <ng-content select=".item-carousel"></ng-content>\n' +
                    '  </div>\n' +
                    '</div>',
                styles: [`
   :host{
        display: flex;
    }
   :host .container {
        margin: 0 auto;
        width: 600px;
        height: 400px;
        position: relative;
    }
   :host .container .carousel {
        height: 100%;
        width: 100%;
        position: absolute;
        -webkit-transform-style: preserve-3d;
        -moz-transform-style: preserve-3d;
        -o-transform-style: preserve-3d;
        transform-style: preserve-3d;

    }
   :host.ready .carousel {
        -webkit-transition: -webkit-transform 300ms;
        -moz-transition:-moz-transform 300ms;
        -o-transition: -o-transform 300ms;
        transition: transform 300ms;
    }
   :host .container .carousel::content >>> .item-carousel {
        display: block;
        position: absolute;
        border:1px solid black;
        width: 100%;
        height: 100%;
        text-align: center;
        transform-style: preserve-3d;
        opacity: 0;
    }
   :host.ready .carousel::content >>> .item-carousel {
        -webkit-transition: opacity 300ms, -webkit-transform 300ms;
        -moz-transition: opacity 300ms, -moz-transform 300ms;
        -o-transition: opacity 300ms, -o-transform 300ms;
        transition: opacity 300ms, transform 300ms;
    }

   :host .container .carousel::content >>> .item-carousel img{
        user-drag: none;
        user-select: none;
        -moz-user-select: none;
        -webkit-user-drag: none;
        -webkit-user-select: none;
        -ms-user-select: none;
    }

   :host .container .carousel::content >>> .item-carousel.next,
   :host .container .carousel::content >>> .item-carousel.prev,
   :host .container .carousel::content >>> .item-carousel.actual{
        opacity: 0.95;
    }
  `]
            }] }
];
/** @nocollapse */
CarouselComponent.ctorParameters = () => [
    { type: ElementRef }
];
CarouselComponent.propDecorators = {
    swiper: [{ type: ViewChild, args: [SwiperDirective,] }],
    morePairSlides: [{ type: Input }],
    threshold: [{ type: Input }],
    angle: [{ type: Input }],
    ratioScale: [{ type: Input }],
    margin: [{ type: Input }],
    perspective: [{ type: Input }],
    endInSlide: [{ type: Input }],
    timeToSlide: [{ type: Input }],
    lockSlides: [{ type: Input }],
    initialSlide: [{ type: Input }],
    loop: [{ type: Input }],
    mode: [{ type: Input }],
    autoPlay: [{ type: Input }],
    delayAutoPlay: [{ type: Input }],
    onInit: [{ type: Output }],
    onReady: [{ type: Output }],
    onChangeProperties: [{ type: Output }],
    onSlideChange: [{ type: Output }],
    onSlideCentered: [{ type: Output }],
    onTransitionStart: [{ type: Output }],
    onTransitionEnd: [{ type: Output }],
    onSlideNextTransitionStart: [{ type: Output }],
    onSlideNextTransitionEnd: [{ type: Output }],
    onSlidePrevTransitionStart: [{ type: Output }],
    onSlidePrevTransitionEnd: [{ type: Output }],
    onSlideMove: [{ type: Output }],
    onSlideMoveEnd: [{ type: Output }],
    onSlideMoveStart: [{ type: Output }],
    onTouchMove: [{ type: Output }],
    onTouchStart: [{ type: Output }],
    onTouchEnd: [{ type: Output }],
    onReachBeginning: [{ type: Output }],
    onReachEnd: [{ type: Output }],
    carouselElm: [{ type: ViewChild, args: ['carousel',] }],
    containerElm: [{ type: ViewChild, args: ['container',] }]
};
if (false) {
    /** @type {?} */
    CarouselComponent.prototype.carousel;
    /**
     * @type {?}
     * @private
     */
    CarouselComponent.prototype.radius;
    /**
     * @type {?}
     * @private
     */
    CarouselComponent.prototype.rotationFn;
    /**
     * @type {?}
     * @private
     */
    CarouselComponent.prototype.itemsCarouselRendered;
    /** @type {?} */
    CarouselComponent.prototype.swiper;
    /** @type {?} */
    CarouselComponent.prototype.morePairSlides;
    /** @type {?} */
    CarouselComponent.prototype.threshold;
    /** @type {?} */
    CarouselComponent.prototype.angle;
    /** @type {?} */
    CarouselComponent.prototype.ratioScale;
    /** @type {?} */
    CarouselComponent.prototype.margin;
    /** @type {?} */
    CarouselComponent.prototype.perspective;
    /** @type {?} */
    CarouselComponent.prototype.endInSlide;
    /** @type {?} */
    CarouselComponent.prototype.timeToSlide;
    /** @type {?} */
    CarouselComponent.prototype.lockSlides;
    /** @type {?} */
    CarouselComponent.prototype.initialSlide;
    /** @type {?} */
    CarouselComponent.prototype.loop;
    /** @type {?} */
    CarouselComponent.prototype.mode;
    /** @type {?} */
    CarouselComponent.prototype.autoPlay;
    /** @type {?} */
    CarouselComponent.prototype.delayAutoPlay;
    /**
     * @type {?}
     * @private
     */
    CarouselComponent.prototype.autoPlayTimeout;
    /** @type {?} */
    CarouselComponent.prototype.onInit;
    /** @type {?} */
    CarouselComponent.prototype.onReady;
    /** @type {?} */
    CarouselComponent.prototype.onChangeProperties;
    /** @type {?} */
    CarouselComponent.prototype.onSlideChange;
    /** @type {?} */
    CarouselComponent.prototype.onSlideCentered;
    /** @type {?} */
    CarouselComponent.prototype.onTransitionStart;
    /** @type {?} */
    CarouselComponent.prototype.onTransitionEnd;
    /** @type {?} */
    CarouselComponent.prototype.onSlideNextTransitionStart;
    /** @type {?} */
    CarouselComponent.prototype.onSlideNextTransitionEnd;
    /** @type {?} */
    CarouselComponent.prototype.onSlidePrevTransitionStart;
    /** @type {?} */
    CarouselComponent.prototype.onSlidePrevTransitionEnd;
    /** @type {?} */
    CarouselComponent.prototype.onSlideMove;
    /** @type {?} */
    CarouselComponent.prototype.onSlideMoveEnd;
    /** @type {?} */
    CarouselComponent.prototype.onSlideMoveStart;
    /** @type {?} */
    CarouselComponent.prototype.onTouchMove;
    /** @type {?} */
    CarouselComponent.prototype.onTouchStart;
    /** @type {?} */
    CarouselComponent.prototype.onTouchEnd;
    /** @type {?} */
    CarouselComponent.prototype.onReachBeginning;
    /** @type {?} */
    CarouselComponent.prototype.onReachEnd;
    /** @type {?} */
    CarouselComponent.prototype.carouselElm;
    /** @type {?} */
    CarouselComponent.prototype.containerElm;
    /**
     * @type {?}
     * @private
     */
    CarouselComponent.prototype.componentElement;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2Fyb3VzZWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LWNhcm91c2VsLWxpYi8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL2Nhcm91c2VsL2Nhcm91c2VsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFBRSxVQUFVLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBVSxNQUFNLEVBQzFELFNBQVMsRUFHVixNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLFFBQVEsTUFBTSxzQkFBc0IsQ0FBQztBQUM1QyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFtRXBFLE1BQU0sT0FBTyxpQkFBaUI7Ozs7SUFxRDVCLFlBQW9CLGdCQUE0QjtRQUE1QixxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQVk7UUFoRHhDLDBCQUFxQixHQUFJLENBQUMsQ0FBRTtRQUUzQixtQkFBYyxHQUFHLENBQUMsQ0FBQztRQUNuQixjQUFTLEdBQUcsQ0FBQyxDQUFDO1FBQ2QsVUFBSyxHQUFHLEVBQUUsQ0FBQztRQUNYLGVBQVUsR0FBRyxDQUFDLENBQUM7UUFDZixXQUFNLEdBQUcsRUFBRSxDQUFDO1FBQ1osZ0JBQVcsR0FBRyxJQUFJLENBQUM7UUFDbkIsZUFBVSxHQUFHLElBQUksQ0FBQztRQUNsQixnQkFBVyxHQUFHLEdBQUcsQ0FBQztRQUNsQixlQUFVLEdBQUcsS0FBSyxDQUFDO1FBQ25CLGlCQUFZLEdBQUcsQ0FBQyxDQUFDO1FBQ2pCLFNBQUksR0FBRyxLQUFLLENBQUM7UUFDYixTQUFJLEdBQUcsWUFBWSxDQUFDOztRQUdwQixhQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ2pCLGtCQUFhLEdBQUcsSUFBSSxDQUFDO1FBR3BCLFdBQU0sR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBQzVCLFlBQU8sR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBQzdCLHVCQUFrQixHQUFHLElB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RU4sTUFBTTs4QkFDTixNQUFNO3lDQUNOLE1BQU07dUNBQ04sTUFBTTt5Q0FDTixNQUFNO3VDQUNOLE1BQU07MEJBRU4sTUFBTTs2QkFDTixNQUFNOytCQUNOLE1BQU07MEJBRU4sTUFBTTsyQkFDTixNQUFNO3lCQUNOLE1BQU07K0JBRU4sTUFBTTt5QkFDTixNQUFNOzBCQUVOLFNBQVMsU0FBQyxVQUFVOzJCQUNwQixTQUFTLFNBQUMsV0FBVzs7OztJQWpEdEIscUNBQTBCOzs7OztJQUMxQixtQ0FBb0I7Ozs7O0lBQ3BCLHVDQUEyQjs7Ozs7SUFDM0Isa0RBQW9DOztJQUNwQyxtQ0FBb0Q7O0lBQ3BELDJDQUE0Qjs7SUFDNUIsc0NBQXVCOztJQUN2QixrQ0FBb0I7O0lBQ3BCLHVDQUF3Qjs7SUFDeEIsbUNBQXFCOztJQUNyQix3Q0FBNEI7O0lBQzVCLHVDQUEyQjs7SUFDM0Isd0NBQTJCOztJQUMzQix1Q0FBNEI7O0lBQzVCLHlDQUEwQjs7SUFDMUIsaUNBQXNCOztJQUN0QixpQ0FBNkI7O0lBRzdCLHFDQUEwQjs7SUFDMUIsMENBQThCOzs7OztJQUM5Qiw0Q0FBNkI7O0lBRTdCLG1DQUFzQzs7SUFDdEMsb0NBQXVDOztJQUN2QywrQ0FBa0Q7O0lBRWxELDBDQUE2Qzs7SUFDN0MsNENBQStDOztJQUUvQyw4Q0FBaUQ7O0lBQ2pELDRDQUErQzs7SUFDL0MsdURBQTBEOztJQUMxRCxxREFBd0Q7O0lBQ3hELHVEQUEwRDs7SUFDMUQscURBQXdEOztJQUV4RCx3Q0FBMkM7O0lBQzNDLDJDQUE4Qzs7SUFDOUMsNkNBQWdEOztJQUVoRCx3Q0FBMkM7O0lBQzNDLHlDQUE0Qzs7SUFDNUMsdUNBQTBDOztJQUUxQyw2Q0FBZ0Q7O0lBQ2hELHVDQUEwQzs7SUFFMUMsd0NBQStDOztJQUMvQyx5Q0FBaUQ7Ozs7O0lBRXJDLDZDQUFvQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbXBvbmVudCwgRWxlbWVudFJlZiwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT25Jbml0LCBPdXRwdXQsIFNpbXBsZUNoYW5nZXMsXG4gIFZpZXdDaGlsZCxcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgT25DaGFuZ2VzXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgQ2Fyb3VzZWwgZnJvbSAnLi4vLi4vbW9kZWwvQ2Fyb3VzZWwnO1xuaW1wb3J0IHsgU3dpcGVyRGlyZWN0aXZlIH0gZnJvbSAnLi4vLi4vZGlyZWN0aXZlcy9zd2lwZXIuZGlyZWN0aXZlJztcbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2Nhcm91c2VsLWNvbXBvbmVudCcsXG4gIHN0eWxlczogW2BcbiAgIDpob3N0e1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgIH1cbiAgIDpob3N0IC5jb250YWluZXIge1xuICAgICAgICBtYXJnaW46IDAgYXV0bztcbiAgICAgICAgd2lkdGg6IDYwMHB4O1xuICAgICAgICBoZWlnaHQ6IDQwMHB4O1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgfVxuICAgOmhvc3QgLmNvbnRhaW5lciAuY2Fyb3VzZWwge1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIC13ZWJraXQtdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcbiAgICAgICAgLW1vei10cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xuICAgICAgICAtby10cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xuICAgICAgICB0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xuXG4gICAgfVxuICAgOmhvc3QucmVhZHkgLmNhcm91c2VsIHtcbiAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOiAtd2Via2l0LXRyYW5zZm9ybSAzMDBtcztcbiAgICAgICAgLW1vei10cmFuc2l0aW9uOi1tb3otdHJhbnNmb3JtIDMwMG1zO1xuICAgICAgICAtby10cmFuc2l0aW9uOiAtby10cmFuc2Zvcm0gMzAwbXM7XG4gICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAzMDBtcztcbiAgICB9XG4gICA6aG9zdCAuY29udGFpbmVyIC5jYXJvdXNlbDo6Y29udGVudCA+Pj4gLml0ZW0tY2Fyb3VzZWwge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBib3JkZXI6MXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIHRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgfVxuICAgOmhvc3QucmVhZHkgLmNhcm91c2VsOjpjb250ZW50ID4+PiAuaXRlbS1jYXJvdXNlbCB7XG4gICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAzMDBtcywgLXdlYmtpdC10cmFuc2Zvcm0gMzAwbXM7XG4gICAgICAgIC1tb3otdHJhbnNpdGlvbjogb3BhY2l0eSAzMDBtcywgLW1vei10cmFuc2Zvcm0gMzAwbXM7XG4gICAgICAgIC1vLXRyYW5zaXRpb246IG9wYWNpdHkgMzAwbXMsIC1vLXRyYW5zZm9ybSAzMDBtcztcbiAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAzMDBtcywgdHJhbnNmb3JtIDMwMG1zO1xuICAgIH1cblxuICAgOmhvc3QgLmNvbnRhaW5lciAuY2Fyb3VzZWw6OmNvbnRlbnQgPj4+IC5pdGVtLWNhcm91c2VsIGltZ3tcbiAgICAgICAgdXNlci1kcmFnOiBub25lO1xuICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgLXdlYmtpdC11c2VyLWRyYWc6IG5vbmU7XG4gICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTtcbiAgICB9XG5cbiAgIDpob3N0IC5jb250YWluZXIgLmNhcm91c2VsOjpjb250ZW50ID4+PiAuaXRlbS1jYXJvdXNlbC5uZXh0LFxuICAgOmhvc3QgLmNvbnRhaW5lciAuY2Fyb3VzZWw6OmNvbnRlbnQgPj4+IC5pdGVtLWNhcm91c2VsLnByZXYsXG4gICA6aG9zdCAuY29udGFpbmVyIC5jYXJvdXNlbDo6Y29udGVudCA+Pj4gLml0ZW0tY2Fyb3VzZWwuYWN0dWFse1xuICAgICAgICBvcGFjaXR5OiAwLjk1O1xuICAgIH1cbiAgYF0sXG4gIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiICNjb250YWluZXI+XFxuJyArXG4gICAgJyAgPGRpdiBjbGFzcz1cImNhcm91c2VsXCIgI2Nhcm91c2VsIHN3aXBlciAoZG9tQ2hhbmdlKT1cIm9uRG9tQ2hhbmdlKCRldmVudClcIj5cXG4nICtcbiAgICAnICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIi5pdGVtLWNhcm91c2VsXCI+PC9uZy1jb250ZW50PlxcbicgK1xuICAgICcgIDwvZGl2PlxcbicgK1xuICAgICc8L2Rpdj4nLFxufSlcbmV4cG9ydCBjbGFzcyBDYXJvdXNlbENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzLCBBZnRlclZpZXdJbml0IHtcblxuICBwdWJsaWMgY2Fyb3VzZWw6IENhcm91c2VsO1xuICBwcml2YXRlIHJhZGl1czogYW55O1xuICBwcml2YXRlIHJvdGF0aW9uRm46IHN0cmluZztcbiAgcHJpdmF0ZSBpdGVtc0Nhcm91c2VsUmVuZGVyZWQgPSAgMCA7XG4gIEBWaWV3Q2hpbGQoU3dpcGVyRGlyZWN0aXZlKSBzd2lwZXI6IFN3aXBlckRpcmVjdGl2ZTtcbiAgQElucHV0KCkgbW9yZVBhaXJTbGlkZXMgPSAxO1xuICBASW5wdXQoKSB0aHJlc2hvbGQgPSA1O1xuICBASW5wdXQoKSBhbmdsZSA9IDQ1O1xuICBASW5wdXQoKSByYXRpb1NjYWxlID0gMTtcbiAgQElucHV0KCkgbWFyZ2luID0gMjA7XG4gIEBJbnB1dCgpIHBlcnNwZWN0aXZlID0gMjAwMDtcbiAgQElucHV0KCkgZW5kSW5TbGlkZSA9IHRydWU7XG4gIEBJbnB1dCgpIHRpbWVUb1NsaWRlID0gMzAwO1xuICBASW5wdXQoKSBsb2NrU2xpZGVzID0gZmFsc2U7XG4gIEBJbnB1dCgpIGluaXRpYWxTbGlkZSA9IDA7XG4gIEBJbnB1dCgpIGxvb3AgPSBmYWxzZTtcbiAgQElucHV0KCkgbW9kZSA9ICdob3Jpem9udGFsJztcblxuICAvLyBhdXRvUGxheVxuICBASW5wdXQoKSBhdXRvUGxheSA9IGZhbHNlO1xuICBASW5wdXQoKSBkZWxheUF1dG9QbGF5ID0gMzAwMDtcbiAgcHJpdmF0ZSBhdXRvUGxheVRpbWVvdXQ6IGFueTtcblxuICBAT3V0cHV0KCkgb25Jbml0ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KCkgb25SZWFkeSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpIG9uQ2hhbmdlUHJvcGVydGllcyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBAT3V0cHV0KCkgb25TbGlkZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpIG9uU2xpZGVDZW50ZXJlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBAT3V0cHV0KCkgb25UcmFuc2l0aW9uU3RhcnQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBPdXRwdXQoKSBvblRyYW5zaXRpb25FbmQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBPdXRwdXQoKSBvblNsaWRlTmV4dFRyYW5zaXRpb25TdGFydCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpIG9uU2xpZGVOZXh0VHJhbnNpdGlvbkVuZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpIG9uU2xpZGVQcmV2VHJhbnNpdGlvblN0YXJ0ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KCkgb25TbGlkZVByZXZUcmFuc2l0aW9uRW5kID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIEBPdXRwdXQoKSBvblNsaWRlTW92ZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpIG9uU2xpZGVNb3ZlRW5kID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KCkgb25TbGlkZU1vdmVTdGFydCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBAT3V0cHV0KCkgb25Ub3VjaE1vdmUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBPdXRwdXQoKSBvblRvdWNoU3RhcnQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBPdXRwdXQoKSBvblRvdWNoRW5kID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIEBPdXRwdXQoKSBvblJlYWNoQmVnaW5uaW5nID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KCkgb25SZWFjaEVuZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBAVmlld0NoaWxkKCdjYXJvdXNlbCcpIGNhcm91c2VsRWxtOiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKCdjb250YWluZXInKSBjb250YWluZXJFbG06IEVsZW1lbnRSZWY7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjb21wb25lbnRFbGVtZW50OiBFbGVtZW50UmVmKSB7XG4gICAgdGhpcy5jYXJvdXNlbCA9IG5ldyBDYXJvdXNlbCgpO1xuICB9XG5cbiAgb25Eb21DaGFuZ2UoJGV2ZW50OiBhbnkpIHtcbiAgICBpZiAoJGV2ZW50LmFkZGVkTm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKHRoaXMuaXRlbXNDYXJvdXNlbFJlbmRlcmVkID09PSAwKSB7XG4gICAgICAgIHRoaXMucmVJbml0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICB0aGlzLnVwZGF0ZUNzc1Nob3dTbGlkZXMoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuaXRlbXNDYXJvdXNlbFJlbmRlcmVkID0gdGhpcy5jYXJvdXNlbEVsbS5uYXRpdmVFbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2l0ZW0tY2Fyb3VzZWwnKS5sZW5ndGg7XG4gICAgfVxuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5vbkluaXQuZW1pdCh0aGlzLmNhcm91c2VsKTtcbiAgICB0aGlzLml0ZW1zQ2Fyb3VzZWxSZW5kZXJlZCA9IHRoaXMuY2Fyb3VzZWxFbG0ubmF0aXZlRWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdpdGVtLWNhcm91c2VsJykubGVuZ3RoO1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgIE9iamVjdC5rZXlzKGNoYW5nZXMpLm1hcCh2YWwgPT4ge1xuICAgICAgaWYgKGNoYW5nZXNbdmFsXS5jdXJyZW50VmFsdWUgIT09IGNoYW5nZXNbdmFsXS5wcmV2aW91c1ZhbHVlICYmICFjaGFuZ2VzW3ZhbF0uaXNGaXJzdENoYW5nZSgpKSB7XG4gICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICB0aGlzLm9uQ2hhbmdlUHJvcGVydGllcy5lbWl0KGNoYW5nZXMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIHRoaXMuaW5pdEV2ZW50c1BhbigpO1xuICAgIHRoaXMuY29uZmlnUGx1Z2luKCk7XG4gICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuY29tcG9uZW50RWxlbWVudC5uYXRpdmVFbGVtZW50LmNsYXNzTmFtZSArPSAnIHJlYWR5JztcbiAgICB9LmJpbmQodGhpcykpO1xuICAgIHRoaXMub25SZWFkeS5lbWl0KHRoaXMuY2Fyb3VzZWwpO1xuICB9XG5cbiAgcHVibGljIGxvY2tDYXJvdXNlbCh2YWw6IGJvb2xlYW4pIHtcbiAgICB0aGlzLmNhcm91c2VsLmxvY2tTbGlkZXMgPSB2YWw7XG4gIH1cblxuICBwdWJsaWMgc2xpZGVOZXh0KCkge1xuICAgIGlmICh0aGlzLmNoZWNrTGltaXRzQ2Fycm91c2VsKHRoaXMuY2Fyb3VzZWwuYWN0aXZlSW5kZXggKyAxKSkge1xuICAgICAgdGhpcy5tb3ZlU2xpZGVUbyh0aGlzLmNhcm91c2VsLmFjdGl2ZUluZGV4ICsgMSk7XG4gICAgICBjb25zdCB2bSA9IHRoaXM7XG4gICAgICBzZXRUaW1lb3V0KCAoKSA9PiAgdm0uZGV0ZWN0Q3VycmVudFNsaWRlKCkpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzbGlkZVByZXYoKSB7XG4gICAgaWYgKHRoaXMuY2hlY2tMaW1pdHNDYXJyb3VzZWwodGhpcy5jYXJvdXNlbC5hY3RpdmVJbmRleCAtIDEpKSB7XG4gICAgICB0aGlzLm1vdmVTbGlkZVRvKHRoaXMuY2Fyb3VzZWwuYWN0aXZlSW5kZXggLSAxKTtcbiAgICAgIGNvbnN0IHZtID0gdGhpcztcbiAgICAgIHNldFRpbWVvdXQoICgpID0+ICB2bS5kZXRlY3RDdXJyZW50U2xpZGUoKSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHNsaWRlVG8oaW5kZXg6IG51bWJlcikge1xuICAgIGlmICh0aGlzLmNoZWNrTGltaXRzQ2Fycm91c2VsKGluZGV4KSkge1xuICAgICAgdGhpcy5tb3ZlU2xpZGVUbyhpbmRleCk7XG4gICAgICBjb25zdCB2bSA9IHRoaXM7XG4gICAgICBzZXRUaW1lb3V0KCAoKSA9PiAgdm0uZGV0ZWN0Q3VycmVudFNsaWRlKCkpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhdXRvUGxheVN0YXJ0KCkge1xuICAgICAgdGhpcy5hdXRvUGxheSA9IHRydWU7XG4gICAgICB0aGlzLmF1dG9QbGF5U2xpZGUoKTtcbiAgfVxuXG4gIHB1YmxpYyBhdXRvUGxheVN0b3AoKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuYXV0b1BsYXlUaW1lb3V0KTtcbiAgICAgIHRoaXMuY2Fyb3VzZWwuYXV0b1BsYXlJc1J1bm5pbmcgPSBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyB0b2dnbGVNb2RlKCkge1xuICAgICAgdGhpcy5tb2RlID0gdGhpcy5tb2RlID09PSAndmVydGljYWwnID8gJ2hvcml6b250YWwnIDogJ3ZlcnRpY2FsJztcbiAgICAgIHRoaXMudXBkYXRlKCk7XG5cbiAgfVxuXG4gIHB1YmxpYyByZUluaXQoKSB7XG4gICAgdGhpcy5jYXJvdXNlbCA9IG5ldyBDYXJvdXNlbDtcbiAgICB0aGlzLmNvbmZpZ1BsdWdpbigpO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZSgpIHtcbiAgICAgIHRoaXMuc2V0UGVyc3BlY3RpdmVDb250YWluZXIoKTtcbiAgICAgIHRoaXMuY2hlY2tSb3RhdGlvbigpO1xuICAgICAgdGhpcy5jYXJvdXNlbC5pdGVtcyA9IEFycmF5LmZyb20odGhpcy5jYXJvdXNlbEVsbS5uYXRpdmVFbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2l0ZW0tY2Fyb3VzZWwnKSk7XG4gICAgICB0aGlzLmNhcm91c2VsLnRvdGFsSXRlbXMgPSB0aGlzLmNhcm91c2VsLml0ZW1zLmxlbmd0aDtcbiAgICAgIHRoaXMuZ2V0bWF4U2l6ZXMoKTtcbiAgICAgIHRoaXMuY2Fyb3VzZWwubG9ja1NsaWRlcyA9IHRoaXMubG9ja1NsaWRlcztcbiAgICAgIHRoaXMuc2V0RGVncmVlc09uU2xpZGVzKCk7XG4gICAgICB0aGlzLnNldFRyYW5zZm9ybUNhcnJvdXNlbCgtdGhpcy5jYXJvdXNlbC5kZWdyZWVzU2xpZGVzW3RoaXMuY2Fyb3VzZWwuYWN0aXZlSW5kZXhdKTtcbiAgfVxuXG4gIHByaXZhdGUgY29uZmlnUGx1Z2luKCkge1xuICAgIHRoaXMudXBkYXRlKCk7XG4gICAgdGhpcy5tYW5hZ2VFdmVudHMoKTtcbiAgICB0aGlzLmluaXRTbGlkZXNPbigpO1xuICAgIHRoaXMudXBkYXRlQ3NzU2hvd1NsaWRlcygpO1xuICAgIHRoaXMuYXV0b1BsYXlTbGlkZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0RXZlbnRzUGFuKCkge1xuICAgICAgdGhpcy5zd2lwZXIub25Td2lwZS5zdWJzY3JpYmUoKGRpc3RhbmNlOiBudW1iZXIpID0+IHtcbiAgICAgICAgdGhpcy5yb3RhdGUoZGlzdGFuY2UpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnN3aXBlci5vblN3aXBlRW5kLnN1YnNjcmliZSgoZGlzdGFuY2U6IG51bWJlcikgPT4ge1xuICAgICAgICB0aGlzLnJvdGF0ZShkaXN0YW5jZSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcm90YXRlKGU6IGFueSkge1xuICAgIGlmICghdGhpcy5jYXJvdXNlbC5sb2NrU2xpZGVzKSB7XG4gICAgICAgIGNvbnN0IHZlbG9jaXR5ID0gdGhpcy5jYXJvdXNlbC5pc0hvcml6b250YWwgPyBlLnZlbG9jaXR5WCAvIHRoaXMudGhyZXNob2xkIDogLWUudmVsb2NpdHlZIC8gdGhpcy50aHJlc2hvbGQ7XG4gICAgICAgIHRoaXMuc2V0TmV3RGVnKHRoaXMuY2Fyb3VzZWwuY3VycmRlZyArIHZlbG9jaXR5ICogd2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xuICAgICAgICB0aGlzLm1vdmVDYXJyb3VzZWwodGhpcy5jYXJvdXNlbC5jdXJyZGVnKTtcbiAgICAgICAgaWYgKGUuaXNGaW5hbCAmJiB0aGlzLmVuZEluU2xpZGUpIHtcbiAgICAgICAgICB0aGlzLm1vdmVTbGlkZVRvKHRoaXMuY2Fyb3VzZWwuYWN0aXZlSW5kZXgpO1xuICAgICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhdXRvUGxheVNsaWRlKCkge1xuICAgIGlmICh0aGlzLmF1dG9QbGF5KSB7XG4gICAgICAgIHRoaXMuYXV0b1BsYXlUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNhcm91c2VsLmF1dG9QbGF5SXNSdW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2xpZGVOZXh0KCk7XG4gICAgICAgICAgICB0aGlzLmF1dG9QbGF5U2xpZGUoKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpLCB0aGlzLmRlbGF5QXV0b1BsYXkpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaW5pdFNsaWRlc09uKCkge1xuICAgIGlmICh0aGlzLmluaXRpYWxTbGlkZSA+PSAwICYmIHRoaXMuaW5pdGlhbFNsaWRlIDwgdGhpcy5jYXJvdXNlbC5pdGVtcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuY2Fyb3VzZWwuYWN0aXZlSW5kZXggPSBwYXJzZUludCh0aGlzLmluaXRpYWxTbGlkZS50b1N0cmluZygpKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaW5pdGlhbFNsaWRlID49IHRoaXMuY2Fyb3VzZWwuaXRlbXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLmNhcm91c2VsLmFjdGl2ZUluZGV4ID0gdGhpcy5jYXJvdXNlbC5pdGVtcy5sZW5ndGggLSAxO1xuICAgICAgdGhpcy5pbml0aWFsU2xpZGUgPSB0aGlzLmNhcm91c2VsLmFjdGl2ZUluZGV4O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2Fyb3VzZWwuYWN0aXZlSW5kZXggPSAwO1xuICAgICAgICB0aGlzLmluaXRpYWxTbGlkZSA9IHRoaXMuY2Fyb3VzZWwuYWN0aXZlSW5kZXg7XG4gICAgfVxuXG4gICAgY29uc3QgbmV3RGVnID0gdGhpcy5jYXJvdXNlbC5hY3RpdmVJbmRleCAqIHRoaXMuYW5nbGU7XG4gICAgdGhpcy5zZXROZXdEZWcoLW5ld0RlZyk7XG4gICAgdGhpcy5zZXRUcmFuc2Zvcm1DYXJyb3VzZWwoLW5ld0RlZyk7XG4gIH1cblxuICBwcml2YXRlIHNldE5ld0RlZyhuZXdEZWc6IG51bWJlcikge1xuICAgIHRoaXMuY2Fyb3VzZWwuY3VycmRlZyA9IG5ld0RlZztcbiAgICBpZiAodGhpcy5jYXJvdXNlbC5jdXJyZGVnID4gMCkge1xuICAgICAgdGhpcy5jYXJvdXNlbC5jdXJyZGVnID0gMDtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2Fyb3VzZWwuY3VycmRlZyA8IC10aGlzLmNhcm91c2VsLm1heERlZ3JlZSkge1xuICAgICAgdGhpcy5jYXJvdXNlbC5jdXJyZGVnID0gLXRoaXMuY2Fyb3VzZWwubWF4RGVncmVlO1xuICAgIH1cblxuICB9XG4gIHByaXZhdGUgY2hlY2tSb3RhdGlvbigpIHtcbiAgICAgIHRoaXMuY2Fyb3VzZWwuaXNIb3Jpem9udGFsID0gdGhpcy5tb2RlICE9PSAndmVydGljYWwnO1xuICAgICAgdGhpcy5yb3RhdGlvbkZuID0gdGhpcy5jYXJvdXNlbC5pc0hvcml6b250YWwgPyAncm90YXRlWSdcbiAgICAgIDogJ3JvdGF0ZVgnO1xuICB9XG4gIHByaXZhdGUgY2hlY2tMaW1pdHNDYXJyb3VzZWwoaW5kZXg6IG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLmNhcm91c2VsLmFjdGl2ZUluZGV4ICE9PSBpbmRleCAmJiBpbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy5jYXJvdXNlbC50b3RhbEl0ZW1zO1xuICB9XG5cbiAgcHJpdmF0ZSBtb3ZlU2xpZGVUbyhpbmRleDogbnVtYmVyKSB7XG4gICAgdGhpcy5zZXROZXdEZWcoLXRoaXMuY2Fyb3VzZWwuZGVncmVlc1NsaWRlc1tpbmRleF0pO1xuICAgIHRoaXMubW92ZUNhcnJvdXNlbCh0aGlzLmNhcm91c2VsLmN1cnJkZWcsIHRoaXMudGltZVRvU2xpZGUpO1xuICB9XG5cbiAgcHJpdmF0ZSBtb3ZlQ2Fycm91c2VsKGRlZzogbnVtYmVyLCB0aW1lVHJhbnNmb3JtOiBudW1iZXIgPSAwKSB7XG4gICAgY29uc3QgdHJhbnNpdGlvbiA9IGB0cmFuc2Zvcm0gJHt0aW1lVHJhbnNmb3JtfW1zYDtcbiAgICB0aGlzLmNhcm91c2VsRWxtLm5hdGl2ZUVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9IHRyYW5zaXRpb247XG4gICAgdGhpcy5jYXJvdXNlbEVsbS5uYXRpdmVFbGVtZW50LnN0eWxlLndlYmtpdFRyYW5zaXRpb24gPSB0cmFuc2l0aW9uO1xuICAgIHRoaXMuc2V0VHJhbnNmb3JtQ2Fycm91c2VsKGRlZyk7XG4gICAgdGhpcy5kZXRlY3RDdXJyZW50U2xpZGUoKTtcblxuICB9XG5cbiAgcHJpdmF0ZSBzZXRUcmFuc2Zvcm1DYXJyb3VzZWwoZGVnOiBudW1iZXIpIHtcbiAgICBjb25zdCB0cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWigkey10aGlzLnJhZGl1c31weCkgJHt0aGlzLnJvdGF0aW9uRm59KCR7ZGVnfWRlZylgO1xuICAgIHRoaXMuY2Fyb3VzZWxFbG0ubmF0aXZlRWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgdGhpcy5jYXJvdXNlbEVsbS5uYXRpdmVFbGVtZW50LnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICB0aGlzLnNlbmRTbGlkZUlzQ2VudGVyZWQoKTtcbiAgfVxuXG4gIHByaXZhdGUgc2VuZFNsaWRlSXNDZW50ZXJlZCgpIHtcbiAgICAgIGlmICh0aGlzLmNhcm91c2VsLmN1cnJkZWcgPT09IC10aGlzLmNhcm91c2VsLmRlZ3JlZXNTbGlkZXNbdGhpcy5jYXJvdXNlbC5hY3RpdmVJbmRleF0pIHtcbiAgICAgICAgICB0aGlzLm9uU2xpZGVDZW50ZXJlZC5lbWl0KHRoaXMuY2Fyb3VzZWwpO1xuICAgICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXRQZXJzcGVjdGl2ZUNvbnRhaW5lcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lckVsbS5uYXRpdmVFbGVtZW50LnN0eWxlLnBlcnNwZWN0aXZlID0gdGhpcy5wZXJzcGVjdGl2ZTtcbiAgICB0aGlzLmNvbnRhaW5lckVsbS5uYXRpdmVFbGVtZW50LnN0eWxlLndlYmtpdFBlcnNwZWN0aXZlID0gdGhpcy5wZXJzcGVjdGl2ZTtcbiAgICB0aGlzLmNvbnRhaW5lckVsbS5uYXRpdmVFbGVtZW50LnN0eWxlLk1velBlcnNwZWN0aXZlID0gdGhpcy5wZXJzcGVjdGl2ZTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0bWF4U2l6ZXMoKSB7XG4gICAgdGhpcy5jYXJvdXNlbC5pdGVtcy5tYXAoKHZhbDogYW55KSA9PiB7XG4gICAgICBjb25zdCB3aWR0aCA9IHZhbC5vZmZzZXRXaWR0aDtcbiAgICAgIGNvbnN0IGhlaWdodCA9IHZhbC5vZmZzZXRIZWlnaHQ7XG4gICAgICB0aGlzLmNhcm91c2VsLm1heFdpZHRoU2l6ZSA9IDA7XG4gICAgICB0aGlzLmNhcm91c2VsLm1heEhlaWdodFNpemUgPSAwO1xuICAgICAgaWYgKCB3aWR0aCA+IHRoaXMuY2Fyb3VzZWwubWF4V2lkdGhTaXplKSB7XG4gICAgICAgIHRoaXMuY2Fyb3VzZWwubWF4V2lkdGhTaXplID0gd2lkdGg7XG4gICAgICAgICAgdGhpcy5jYXJvdXNlbC50b3RhbFdpZHRoID0gdGhpcy5jYXJvdXNlbC5pdGVtcy5sZW5ndGggKiB0aGlzLmNhcm91c2VsLm1heFdpZHRoU2l6ZTtcbiAgICAgIH1cbiAgICAgIGlmICggaGVpZ2h0ID4gdGhpcy5jYXJvdXNlbC5tYXhIZWlnaHRTaXplKSB7XG4gICAgICAgIHRoaXMuY2Fyb3VzZWwubWF4SGVpZ2h0U2l6ZSA9IGhlaWdodDtcbiAgICAgICAgICB0aGlzLmNhcm91c2VsLnRvdGFsV2lkdGggPSB0aGlzLmNhcm91c2VsLml0ZW1zLmxlbmd0aCAqIHRoaXMuY2Fyb3VzZWwubWF4SGVpZ2h0U2l6ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLnNldENvbnRhaW5lcldpdGhNYXhTaXplKCk7XG4gIH1cbiAgcHJpdmF0ZSBzZXRDb250YWluZXJXaXRoTWF4U2l6ZSgpIHtcbiAgICB0aGlzLmNvbnRhaW5lckVsbS5uYXRpdmVFbGVtZW50LnN0eWxlLndpZHRoID0gdGhpcy5jYXJvdXNlbC5tYXhXaWR0aFNpemUgKyAncHgnO1xuICAgIHRoaXMuY29udGFpbmVyRWxtLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5jYXJvdXNlbC5tYXhIZWlnaHRTaXplICsgJ3B4JztcbiAgfVxuICBwcml2YXRlIHNldERlZ3JlZXNPblNsaWRlcygpIHtcbiAgICBsZXQgYXV4RGVncmVlID0gMDtcbiAgICBjb25zdCBwYW5lbFNpemUgPSB0aGlzLmNhcm91c2VsLmlzSG9yaXpvbnRhbCA/IHRoaXMuY2Fyb3VzZWwubWF4V2lkdGhTaXplIDogdGhpcy5jYXJvdXNlbC5tYXhIZWlnaHRTaXplO1xuICAgIHRoaXMucmFkaXVzID0gKE1hdGgucm91bmQoICggcGFuZWxTaXplIC8gMiApIC9cbiAgICAgIE1hdGgudGFuKCBNYXRoLlBJIC8gKDM2MCAvIHRoaXMuYW5nbGUpICkgKSArIHRoaXMubWFyZ2luKTtcbiAgICB0aGlzLmNhcm91c2VsLmRlZ3JlZXNTbGlkZXMgPSBbXTtcbiAgICB0aGlzLmNhcm91c2VsLml0ZW1zLm1hcCgodmFsOiBhbnksIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IGAke3RoaXMucm90YXRpb25Gbn0oJHthdXhEZWdyZWV9ZGVnKSB0cmFuc2xhdGVaKCR7dGhpcy5yYWRpdXN9cHgpYDtcbiAgICAgIHZhbC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgICB2YWwuc3R5bGUud2Via2l0VHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgICAgdGhpcy5jYXJvdXNlbC5kZWdyZWVzU2xpZGVzLnB1c2goYXV4RGVncmVlKTtcbiAgICAgIHRoaXMuY2Fyb3VzZWwubWF4RGVncmVlID0gYXV4RGVncmVlO1xuICAgICAgYXV4RGVncmVlICs9IHRoaXMuYW5nbGU7XG4gICAgfSk7XG5cbiAgfVxuXG4gIHByaXZhdGUgZGV0ZWN0Q3VycmVudFNsaWRlKCkge1xuICAgIGxldCBhdXggPSA5OWU5O1xuICAgIGxldCBpbmRleCA9IDA7XG4gICAgdGhpcy5jYXJvdXNlbC5kZWdyZWVzU2xpZGVzLmZvckVhY2goKHZhbDogYW55LCBpOiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnN0IHJlcyA9IE1hdGguYWJzKHZhbCAtIE1hdGguYWJzKHRoaXMuY2Fyb3VzZWwuY3VycmRlZykpO1xuICAgICAgaWYgKHJlcyA8IGF1eCkge1xuICAgICAgICBhdXggPSByZXM7XG4gICAgICAgIGluZGV4ID0gaTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAodGhpcy5jYXJvdXNlbC5hY3RpdmVJbmRleCAhPT0gaW5kZXgpIHtcbiAgICAgIHRoaXMuY2Fyb3VzZWwubGFzdEluZGV4ID0gIHRoaXMuY2Fyb3VzZWwuYWN0aXZlSW5kZXg7XG4gICAgICB0aGlzLmNhcm91c2VsLmFjdGl2ZUluZGV4ID0gaW5kZXg7XG4gICAgICB0aGlzLnVwZGF0ZUNzc1Nob3dTbGlkZXMoKTtcblxuICAgICAgdGhpcy5vblNsaWRlQ2hhbmdlLmVtaXQodGhpcy5jYXJvdXNlbCk7XG4gICAgICBpZiAodGhpcy5jYXJvdXNlbC5hY3RpdmVJbmRleCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMub25SZWFjaEJlZ2lubmluZy5lbWl0KHRoaXMuY2Fyb3VzZWwpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmNhcm91c2VsLmFjdGl2ZUluZGV4ID09PSB0aGlzLmNhcm91c2VsLnRvdGFsSXRlbXMgLSAxKSB7XG4gICAgICAgICAgdGhpcy5vblJlYWNoRW5kLmVtaXQodGhpcy5jYXJvdXNlbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVDc3NTaG93U2xpZGVzKCkge1xuICAgIGNvbnN0IHZtID0gdGhpcztcbiAgICBjb25zdCBjdXJyZW50SW5kZXggPSB2bS5jYXJvdXNlbC5hY3RpdmVJbmRleDtcbiAgICBjb25zdCBhY3R1YWwgPSB0aGlzLmNhcm91c2VsLml0ZW1zW2N1cnJlbnRJbmRleF07XG4gICAgdm0ucmVtb3ZlQ2xhc3NTaG93U2xpZGVzKCdhY3R1YWwnKTtcbiAgICB2bS5yZW1vdmVDbGFzc1Nob3dTbGlkZXMoJ3ByZXYnKTtcbiAgICB2bS5yZW1vdmVDbGFzc1Nob3dTbGlkZXMoJ25leHQnKTtcbiAgICBpZiAoYWN0dWFsKSB7XG4gICAgICBhY3R1YWwuY2xhc3NOYW1lICs9ICcgYWN0dWFsJztcbiAgICB9XG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLm1vcmVQYWlyU2xpZGVzOyB4KyspIHtcbiAgICAgIGNvbnN0IHByZXYgPSB2bS5jYXJvdXNlbC5pdGVtc1tjdXJyZW50SW5kZXggLSAoeCArIDEpXTtcbiAgICAgIGNvbnN0IG5leHQgPSB2bS5jYXJvdXNlbC5pdGVtc1tjdXJyZW50SW5kZXggKyAoeCArIDEpXTtcbiAgICAgIGlmIChwcmV2KSB7XG4gICAgICAgIHByZXYuY2xhc3NOYW1lICs9ICcgcHJldic7XG4gICAgICB9XG4gICAgICBpZiAobmV4dCkge1xuICAgICAgICBuZXh0LmNsYXNzTmFtZSArPSAnIG5leHQnO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBwcml2YXRlIHJlbW92ZUNsYXNzU2hvd1NsaWRlcyh0YWdDbGFzczogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMuY2Fyb3VzZWxFbG0ubmF0aXZlRWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHRhZ0NsYXNzKS5sZW5ndGggPiAwKSB7XG4gICAgICBBcnJheS5mcm9tKHRoaXMuY2Fyb3VzZWxFbG0ubmF0aXZlRWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHRhZ0NsYXNzKSkubWFwKCh2YWw6IGFueSkgPT4ge1xuICAgICAgICB2YWxbJ2NsYXNzTGlzdCddLnJlbW92ZSh0YWdDbGFzcyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcHJpdmF0ZSBtYW5hZ2VFdmVudHMoKSB7XG4gICAgY29uc3Qgb3B0aW9uczogYW55ID0ge1xuICAgICAgcHJldmVudERlZmF1bHQ6IHRydWVcbiAgICB9O1xuICAgIGNvbnN0IHZtID0gdGhpcztcblxuICAgIHRoaXMuc3dpcGVyLm9uU3dpcGUuc3Vic2NyaWJlKChlOiBudW1iZXIpID0+IHtcbiAgICAgIHZtLm9uU2xpZGVNb3ZlLmVtaXQoeyBjYXJvdXNlbDogdm0uY2Fyb3VzZWwsIGV2ZW50OiBlfSk7XG4gICAgICB2bS5vblRvdWNoTW92ZS5lbWl0KHtjYXJvdXNlbDogdm0uY2Fyb3VzZWwsIGV2ZW50OiBlfSk7XG4gICAgfSk7XG4gICAgdGhpcy5zd2lwZXIub25Td2lwZVN0YXJ0LnN1YnNjcmliZSgoZTogbnVtYmVyKSA9PiB7XG4gICAgICB2bS5vblNsaWRlTW92ZVN0YXJ0LmVtaXQoeyBjYXJvdXNlbDogdm0uY2Fyb3VzZWwsIGV2ZW50OiBlfSk7XG4gICAgICB2bS5vblRvdWNoU3RhcnQuZW1pdCh7Y2Fyb3VzZWw6IHZtLmNhcm91c2VsLCBldmVudDogZX0pO1xuICAgIH0pO1xuICAgIHRoaXMuc3dpcGVyLm9uU3dpcGVFbmQuc3Vic2NyaWJlKChlOiBudW1iZXIpID0+IHtcbiAgICAgIHZtLm9uU2xpZGVNb3ZlRW5kLmVtaXQoeyBjYXJvdXNlbDogdm0uY2Fyb3VzZWwsIGV2ZW50OiBlfSk7XG4gICAgICB2bS5vblRvdWNoRW5kLmVtaXQoeyBjYXJvdXNlbDogdm0uY2Fyb3VzZWwsIGV2ZW50OiBlfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNhcm91c2VsRWxtLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIChlOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IGVsbSA9IHtjYXJvdXNlbDogdm0uY2Fyb3VzZWwsIGV2ZW50OiBlfTtcbiAgICAgIGlmIChlLnByb3BlcnR5TmFtZSA9PT0gJ3RyYW5zZm9ybScpIHtcbiAgICAgICAgdGhpcy5vblRyYW5zaXRpb25FbmQuZW1pdChlbG0pO1xuICAgICAgICBpZiAodm0uY2Fyb3VzZWwubGFzdEluZGV4ID4gdm0uY2Fyb3VzZWwuYWN0aXZlSW5kZXgpIHtcbiAgICAgICAgICB0aGlzLm9uU2xpZGVOZXh0VHJhbnNpdGlvbkVuZC5lbWl0KGVsbSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5vblNsaWRlUHJldlRyYW5zaXRpb25FbmQuZW1pdChlbG0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmNhcm91c2VsRWxtLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbnN0YXJ0JywgKGU6IGFueSkgPT4ge1xuICAgICAgY29uc3QgZWxtID0ge2Nhcm91c2VsOiB2bS5jYXJvdXNlbCwgZXZlbnQ6IGV9O1xuICAgICAgaWYgKGUucHJvcGVydHlOYW1lID09PSAndHJhbnNmb3JtJykge1xuICAgICAgICAgIHRoaXMub25UcmFuc2l0aW9uU3RhcnQuZW1pdChlbG0pO1xuICAgICAgICAgIC8vIGlmIChlLmRpcmVjdGlvbiA9PT0gSGFtbWVyLkRJUkVDVElPTl9MRUZUKSB7XG4gICAgICAgICAgLy8gICB2bS5vblNsaWRlTmV4dFRyYW5zaXRpb25TdGFydC5lbWl0KGVsbSk7XG4gICAgICAgICAgLy8gfSBlbHNlIGlmIChlLmRpcmVjdGlvbiA9PT0gSGFtbWVyLkRJUkVDVElPTl9SSUdIVCkge1xuICAgICAgICAgIC8vICAgdm0ub25TbGlkZVByZXZUcmFuc2l0aW9uU3RhcnQuZW1pdChlbG0pO1xuICAgICAgICAgIC8vIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfS5iaW5kKHRoaXMpKTtcblxuICB9XG59XG4iXX0=